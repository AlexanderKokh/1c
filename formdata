&НаКлиенте
Процедура ОтпавитьFormDATA()

ПодлючениеHttp = ПараметрыПодключенияHttp();
	
	HTTPСоединение 	= Новый HTTPСоединение(ПодлючениеHttp.Адрес,,,,,,ПодлючениеHttp.ЗащищенноеСоединениеOpenSSL);
	
	ЗапросHTTP  = Новый HTTPЗапрос(ПодлючениеHttp.URLlogin);	
	
	ПоместитьФайлы(ЗапросHTTP);
	
	HTTPОтвет = HTTPСоединение.ОтправитьДляОбработки(ЗапросHTTP);
	
	Ответ =  Новый Структура("Код, Заголовки, Текст", HTTPОтвет.КодСостояния, HTTPОтвет.Заголовки, HTTPОтвет.ПолучитьТелоКакСтроку());

КонецПроцедуры

&НаКлиенте
Процедура ЗакодироватьФайлы(ЗапросHTTP)

	Разделитель = СтрЗаменить(Новый УникальныйИдентификатор, "-", "");
	РазделительСтрок = Символы.ВК + Символы.ПС;
	
	ИмяФайла = ПолучитьИмяВременногоФайла("txt");
	ТекФайл = Новый ТекстовыйДокумент;
	ТекФайл.Записать(ИмяФайла);
	
	Файл = Новый Файл(ИмяФайла);

	РазмерФайла = Файл.Размер();
	
	БуферДвоичныхДанных = Новый БуферДвоичныхДанных(РазмерФайла);
	
	ФайловыйПоток = Новый ФайловыйПоток(Файл.ПолноеИмя, РежимОткрытияФайла.Открыть);
	ФайловыйПоток.Прочитать(БуферДвоичныхДанных, 0, РазмерФайла);
	ФайловыйПоток.Закрыть();
	
	ПотокТело = Новый ПотокВПамяти();
	ЗаписьДанных = Новый ЗаписьДанных(ПотокТело);
	
	ЗаписьДанных.ЗаписатьСтроку("--" + Разделитель);
	ЗаписьДанных.ЗаписатьСтроку("Content-Disposition: form-data; name=""date""");
	ЗаписьДанных.ЗаписатьСтроку("");
	ЗаписьДанных.ЗаписатьСтроку("11.01.2021");
	ЗаписьДанных.ЗаписатьСтроку("");
	ЗаписьДанных.ЗаписатьСтроку("--" + Разделитель + "--");
	
	РазмерСодержимого = XMLСтрока(ПотокТело.Размер());
	ЗаписьДанных.Закрыть();
	
	ДвоичныеДанныеТело = ПотокТело.ЗакрытьИПолучитьДвоичныеДанные();
	
	ЗапросHTTP.УстановитьТелоИзДвоичныхДанных(ДвоичныеДанныеТело);
	
	ТипКонтента = СтрШаблон("multipart/form-data; boundary=%1", Разделитель);
	
	ЗапросHTTP.Заголовки.Вставить("Content-Type", ТипКонтента);
	ЗапросHTTP.Заголовки.Вставить("Content-length", РазмерСодержимого);
	
КонецПроцедуры

